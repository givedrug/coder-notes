# Java修饰词synchronize


分为类锁和对象锁，且有两种形式，分为方法形式和代码块形式。

当修饰静态方法时，锁定的是当前类的Class对象。

当修饰普通方法时，锁定的是当前类的实例对象。

类或对象就是加锁解锁的对象，也就是临界区。

类锁是这个类中多有实例对象都可见的锁。

对象锁仅这个对象可见。

加锁时选择什么粒度的锁取决于临界区内资源共同可见的层级在哪里，如果在同一个对象中，则加对象锁，如果在同一个类中，则加类锁，如果分属于不同的对象，则加一个全局锁（可以设置一个单例对象，或final对象）。

**synchronized锁是可重入的**，这就是说，如果线程a，已经持有锁1，则线程a再次获取锁1，仍然可以获取，jvm会将计数器加1，当释放锁的时候，计数器减1，如果计数器减到0，则说明线程a对锁1已经完全释放，其他线程可以获取锁1了。
