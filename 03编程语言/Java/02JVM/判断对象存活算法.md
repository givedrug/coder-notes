# 判断对象存活算法


## 引用计数法

存在问题：循环引用。

## 根可达法

root有哪些？

- 虚拟机栈中引用的对象
- 本地方法栈中引用的对象
- 方法区中静态变量
- 方法区中常量池
- JVM内部引用（基本数据类型Class对象、常驻异常对象、类加载器等）
- 同步锁（synchronized）持有的对象
- 等

如果一个对象被认为是不可达的，并不会马上被回收，它会执行：

1.判断对象是否覆盖finalize()方法，如果有并且之前没有执行过，则放入F-Queue队列中，等待执行finalize()方法；如果没有，或者之前已经执行过一次finalize()，则将被回收。

2.在finalize()中，如果对象能将自己的引用与任何一个GCroot对象相关联，则对象不会被回收；否则，将被回收。
